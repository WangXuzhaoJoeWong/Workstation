# Shared environment for Workstation services (arm/task/bt/plan)
# Copy to: /etc/workstation/workstation.env

# DDS domain
# Must be the same for all Workstation services in the same deployment.
WXZ_DOMAIN_ID=0

# FastDDS transport hardening
# If you hit intermittent FastDDS SharedMemTransport issues (e.g. std::bad_alloc / /dev/shm leftovers),
# force UDP-only transports to avoid shared memory entirely.
# - Preferred switch:
#   WXZ_FASTDDS_FORCE_UDP_ONLY=1
# - Legacy alias (kept for compatibility):
#   WXZ_FASTDDS_DISABLE_SHM=1

# Software version propagated to services (capability/status + fault/status)
# WXZ_SW_VERSION=dev

# Capability / fault governance topics
# WXZ_CAPABILITY_STATUS_TOPIC=capability/status
# WXZ_FAULT_STATUS_TOPIC=fault/status
# WXZ_FAULT_ACTION_TOPIC=fault/action

# --- Arm service ---
# Connection parameters for CGXi_Robot_SDK.
# Common pitfalls:
# - network unreachable (no cable / wrong subnet) => connect timeout
# - wrong port (real controller is typically 2323)
# - wrong password => connect ok but later ops may fail (depends on controller config)
WXZ_ARM_IP=192.168.100.88
WXZ_ARM_PORT=2323
WXZ_ARM_PASS=123

# Topics must match bt_service side.
WXZ_P1_ARM_COMMAND_TOPIC=/arm/command
WXZ_P1_ARM_STATUS_TOPIC=/arm/status
# DTO schema ids (deployment-contract)
WXZ_ARM_CMD_DTO_SCHEMA=ws.arm_cmd.v1
WXZ_ARM_STATUS_DTO_SCHEMA=ws.arm_status.v1
# Optional DTO knobs
# Payload size limit for EventDTO (bytes). Default in code is 8192.
# If you increase this, ensure both publisher/subscriber are configured consistently.
# WXZ_DTO_MAX_PAYLOAD=262144
# WXZ_DTO_SOURCE=workstation

# Command queue capacity inside arm_control.
# Too small => drops commands under burst; too large => more latency under overload.
WXZ_ARM_QUEUE_MAX=64

# Motion safety / debugging (arm_control)
# - When developing or verifying units, enable dry-run to log the computed motion params without moving.
#   WXZ_ARM_DRY_RUN=1
# - Guardrails reject suspiciously large angles (common mistake: degrees passed as radians).
#   Override only if you know what you're doing:
#   WXZ_ARM_ALLOW_LARGE_ANGLE=1
#   WXZ_ARM_ALLOW_LARGE_JOINT=1


# --- Behavior tree service ---
# XML path (hot-reload)
# bt_service 固定读取当前工作目录下的 ./bt.xml（相对路径），因此不再使用 WXZ_BT_XML。
# WXZ_BT_XML=/etc/workstation/bt.xml
# Hot-reload polling period (ms)
# Smaller => faster reload after editing bt.xml, but more filesystem polling.
WXZ_BT_RELOAD_MS=1000
# Tick period (ms)
# Smaller => higher tick frequency (more CPU / more command rate).
# Typical values: 10~50ms. Avoid extremely small values unless you know the cost.
WXZ_BT_TICK_MS=10

# Groot1 monitoring (ZMQ publisher)
# Set to 1 to enable publishing to Groot1; Groot can start/stop independently.
WXZ_BT_GROOT=1
WXZ_BT_GROOT_PORT=1666
# Optional: explicitly set Groot server port (default is BT_GROOT_PORT+1)
# WXZ_BT_GROOT_SERVER_PORT=1667
# Optional: retry binding ports when occupied; increments port on each attempt
WXZ_BT_GROOT_RETRY=5

# Arm command timeout used by BT action nodes
# Unit: ms. If too small, long motions will appear as timeouts.
WXZ_ARM_CMD_TIMEOUT_MS=30000


# Logging
# WXZ_LOG_LEVEL=info   # error|warn|info|debug or 0/1/2/3
